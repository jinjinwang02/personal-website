<%- include ('partials/header.ejs'); %>

<%- include ('partials/home.ejs'); %>

<%- include ('partials/info.ejs'); %>

<%- include ('partials/projects.ejs'); %>

<script>
    const popup = document.getElementById("popup");
    function contactClick() {
        if (popup.classList.length === 1) {
            popup.classList.add("nav__popup-active");
        } else {
            popup.classList.remove("nav__popup-active");
        }
    }

    const sections = document.querySelectorAll("section");
    const underline = document.getElementById("underline");
    const navInfo = document.querySelector(".nav__item-2");
    const navProjects = document.querySelector(".nav__item-3");
    const options = {
        threshold: 0.7,
    };
    let observer = new IntersectionObserver(navCheck, options);
    function navCheck(entries) {
        entries.forEach((entry) => {
            const className = entry.target.className;
            const activeAnchor = document.querySelector(`[data-page=${className}]`);
            const sectionIndex = entry.target.getAttribute("data-index");
            const coords = activeAnchor.getBoundingClientRect();
            const directions = {
                left: coords.left,
            };
            if (entry.isIntersecting) {
                underline.style.setProperty("left", `${directions.left - 64}px`);
                if (className === "home") {
                    underline.style.setProperty("width", "92.2vw");
                    underline.style.setProperty("background-color", "transparent");
                    underline.style.setProperty("height", "4rem");
                    underline.style.setProperty("top", "3rem");
                    navInfo.style.setProperty("color", "#000");
                    navProjects.style.setProperty("color", "#000");
                }
                if (className === "info") {
                    underline.style.setProperty("width", "15.2rem");
                    underline.style.setProperty("background-color", "#BE020D");
                    underline.style.setProperty("height", "3rem");
                    underline.style.setProperty("top", "3.4rem");
                    navInfo.style.setProperty("color", "#F8F6F0");
                    navProjects.style.setProperty("color", "#000");

                }
                if (className === "projects") {
                    underline.style.setProperty("width", "64.9vw");
                    underline.style.setProperty("background-color", "#BE020D");
                    underline.style.setProperty("height", "3rem");
                    underline.style.setProperty("top", "3.4rem");
                    navProjects.style.setProperty("color", "#F8F6F0");
                    navInfo.style.setProperty("color", "#000");
                }
            }
        });
    }
    sections.forEach((section) => {
        observer.observe(section);
    });
</script>

<%- include ('partials/footer.ejs'); %>